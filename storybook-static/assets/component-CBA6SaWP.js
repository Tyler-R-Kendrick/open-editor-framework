import{j as r}from"./jsx-runtime-DlRdbTK2.js";import{r as l}from"./iframe-B_meevF9.js";class j{id;type;name;bounds;properties;zIndex;parent;children;constructor(a){this.id=a.id,this.type=a.type,this.name=a.name,this.bounds=a.bounds,this.properties=a.properties??{},this.zIndex=a.zIndex,this.parent=a.parent,this.children=a.children}updateProperties(a){this.properties={...this.properties,...a}}}class v extends j{icon;category;description;defaultSize;constructor(a){super({id:a.id,type:a.type,name:a.name,bounds:{x:0,y:0,width:a.defaultSize.width,height:a.defaultSize.height},properties:a.properties,zIndex:a.zIndex,parent:a.parent,children:a.children}),this.icon=a.icon,this.category=a.category,this.description=a.description,this.defaultSize=a.defaultSize}get template(){return{type:this.type,defaultSize:this.defaultSize,properties:{...this.properties}}}}const w=(t="/assets/component-templates.json")=>{const[a,f]=l.useState([]),[y,x]=l.useState([]),[p,c]=l.useState(!0),[b,s]=l.useState(null),u=l.useCallback(async()=>{try{c(!0),s(null);const o=await fetch(t);if(!o.ok)throw new Error(`Failed to load templates: ${o.status} ${o.statusText}`);const i=await o.json();if(!i.templates||!Array.isArray(i.templates))throw new Error("Invalid templates data structure: missing or invalid templates array");if(!i.categories||!Array.isArray(i.categories))throw new Error("Invalid templates data structure: missing or invalid categories array");for(const d of i.templates)if(!d.id||!d.name||!d.type)throw new Error("Invalid template structure: template missing required fields (id, name, type)");const h=i.templates.map(d=>new v(d));f(h),x(i.categories)}catch(o){console.warn("Failed to load external component templates:",o),s(o instanceof Error?o.message:"Unknown error occurred"),f([]),x([])}finally{c(!1)}},[t]);return l.useEffect(()=>{u()}),{templates:a,categories:y,loading:p,error:b,reload:()=>{u()}}},C=({theme:t,"aria-label":a,templateUrl:f})=>{const{templates:y,categories:x,loading:p,error:c,reload:b}=w(f),[s,u]=l.useState("All"),[g,o]=l.useState(""),i=y.filter(e=>{const n=s==="All"||e.category===s,S=e.name.toLowerCase().includes(g.toLowerCase())||e.description.toLowerCase().includes(g.toLowerCase());return n&&S}),h=(e,n)=>{e.dataTransfer.setData("application/json",JSON.stringify(n.template)),e.dataTransfer.effectAllowed="copy"},d=e=>{console.log("Add component to canvas:",e)},m=e=>({padding:"8px 12px",border:"none",borderRadius:"6px",background:e?"#3b82f6":t==="dark"?"#4b5563":"#f3f4f6",color:e?"#ffffff":t==="dark"?"#d1d5db":"#374151",cursor:"pointer",fontSize:"14px",transition:"all 0.2s ease",whiteSpace:"nowrap"}),k={padding:"12px",borderRadius:"8px",background:t==="dark"?"#4b5563":"#ffffff",border:`1px solid ${t==="dark"?"#6b7280":"#e2e8f0"}`,cursor:"grab",transition:"all 0.2s ease",userSelect:"none",touchAction:"manipulation"};return r.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",background:t==="dark"?"#374151":"white",overflow:"hidden"},"aria-label":a||"Component Palette",children:[r.jsxs("div",{style:{padding:"16px",borderBottom:`1px solid ${t==="dark"?"#4b5563":"#e2e8f0"}`},children:[r.jsx("h2",{style:{margin:"0 0 12px 0",fontSize:"18px",fontWeight:"600",color:t==="dark"?"#f8fafc":"#1e293b"},children:"Components"}),r.jsx("input",{type:"text",placeholder:"Search components...",value:g,onChange:e=>o(e.target.value),style:{width:"100%",padding:"8px 12px",border:`1px solid ${t==="dark"?"#6b7280":"#d1d5db"}`,borderRadius:"6px",background:t==="dark"?"#4b5563":"#ffffff",color:t==="dark"?"#f8fafc":"#1e293b",fontSize:"14px",outline:"none",transition:"border-color 0.2s ease"},onFocus:e=>e.target.style.borderColor="#3b82f6",onBlur:e=>e.target.style.borderColor=t==="dark"?"#6b7280":"#d1d5db"})]}),p&&r.jsxs("div",{style:{padding:"32px 16px",textAlign:"center",color:t==="dark"?"#9ca3af":"#6b7280"},children:[r.jsx("div",{style:{fontSize:"32px",marginBottom:"16px"},children:"⏳"}),r.jsx("p",{children:"Loading component templates..."})]}),c&&!p&&r.jsxs("div",{style:{padding:"16px",margin:"16px",borderRadius:"8px",background:t==="dark"?"#7f1d1d":"#fef2f2",border:`1px solid ${t==="dark"?"#dc2626":"#fecaca"}`,color:t==="dark"?"#fca5a5":"#dc2626"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[r.jsx("span",{style:{fontSize:"16px"},children:"⚠️"}),r.jsx("strong",{children:"Failed to load templates"})]}),r.jsx("p",{style:{margin:"0 0 12px 0",fontSize:"14px"},children:c}),r.jsx("button",{onClick:b,style:{padding:"6px 12px",borderRadius:"4px",border:"none",background:"#dc2626",color:"white",fontSize:"12px",cursor:"pointer"},children:"Retry"}),r.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"12px",opacity:.8},children:"Using default templates as fallback"})]}),!p&&r.jsx("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${t==="dark"?"#4b5563":"#e2e8f0"}`},children:r.jsx("div",{style:{display:"flex",gap:"8px",overflowX:"auto",paddingBottom:"4px"},children:x.map(e=>r.jsx("button",{onClick:()=>u(e),style:m(s===e),onMouseEnter:n=>{s!==e&&(n.currentTarget.style.background=t==="dark"?"#6b7280":"#e5e7eb")},onMouseLeave:n=>{s!==e&&(n.currentTarget.style.background=t==="dark"?"#4b5563":"#f3f4f6")},children:e},e))})}),!p&&r.jsx("div",{style:{flex:1,overflow:"auto",padding:"16px"},children:i.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"32px 16px",color:t==="dark"?"#9ca3af":"#6b7280"},children:[r.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"🔍"}),r.jsx("p",{children:"No components found"}),r.jsx("p",{style:{fontSize:"14px",marginTop:"8px"},children:"Try adjusting your search or category filter"})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:i.map(e=>r.jsx("div",{draggable:!0,onDragStart:n=>h(n,e),onClick:()=>d(e),style:k,onMouseEnter:n=>{n.currentTarget.style.transform="translateY(-1px)",n.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},onMouseLeave:n=>{n.currentTarget.style.transform="translateY(0)",n.currentTarget.style.boxShadow="none"},role:"button",tabIndex:0,"aria-label":`Add ${e.name} component`,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),d(e))},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx("div",{style:{fontSize:"24px",minWidth:"32px",textAlign:"center"},"aria-hidden":"true",children:e.icon}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:"500",marginBottom:"4px",color:t==="dark"?"#f8fafc":"#1e293b"},children:e.name}),r.jsx("div",{style:{fontSize:"12px",color:t==="dark"?"#9ca3af":"#6b7280",lineHeight:"1.4"},children:e.description})]}),r.jsx("div",{style:{padding:"4px 8px",borderRadius:"4px",background:t==="dark"?"#6b7280":"#f1f5f9",color:t==="dark"?"#d1d5db":"#64748b",fontSize:"11px",fontWeight:"500"},children:e.category})]})},e.id))})}),r.jsx("div",{style:{padding:"12px 16px",borderTop:`1px solid ${t==="dark"?"#4b5563":"#e2e8f0"}`,background:t==="dark"?"#4b5563":"#f8fafc"},children:r.jsx("p",{style:{margin:0,fontSize:"12px",color:t==="dark"?"#9ca3af":"#6b7280",textAlign:"center"},children:"Drag components to canvas or tap to add"})})]})};C.__docgenInfo={description:`Component palette with drag-and-drop component templates
Features:
- Categorized component library
- Search and filter functionality
- Drag-and-drop to canvas
- Touch-friendly interface
- Keyboard navigation support
- External JSON template loading`,methods:[],displayName:"ComponentPalette",props:{theme:{required:!0,tsType:{name:"union",raw:"'light' | 'dark'",elements:[{name:"literal",value:"'light'"},{name:"literal",value:"'dark'"}]},description:""},"aria-label":{required:!1,tsType:{name:"string"},description:""},templateUrl:{required:!1,tsType:{name:"string"},description:""}}};export{C};
